[power printer]
type: http
on_url: http://localhost:56427/on
off_url: http://localhost:56427/off
status_url: http://localhost:56427/status
response_template:
  {% set resp = http_request.last_response().json() if http_request.last_response().is_json else {} %}
  {% if resp.get("status") == true %}
    {"on"}
  {% elif resp.get("status") == false  %}
    {"off"}
  {% else %}
    {"unknown"}
  {% endif %}
off_when_shutdown: True
locked_while_printing: True
restart_klipper_when_powered: True
on_when_job_queued: True

[update_manager klipper-printer-on-off]
type: git_repo
primary_branch: main
path: /home/pi/klipper-printer-on-off
origin: https://github.com/joseto1298/klipper-printer-on-off.git
virtualenv: /home/pi/klipper-printer-on-off/.venv
managed_services: klipper-printer-on-off